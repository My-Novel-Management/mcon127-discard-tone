# -*- coding: utf-8 -*-
'''
Stage: "堺田のマンション"
'''
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')
from storybuilder.builder.world import World


## scenes
def he_is_composer(w: World):
    maki, sakai = w.get('maki'), w.get('sakai')
    return w.scene('彼は作曲家',
            w.symbol("　　　　◆"),
            "マンション外観。割と高級住宅街にある",
            maki.come("エレベータで五階に上がり、何も言わない男に続いてそのマンションの廊下を歩いた", "&"),
            sakai.be("男は時々確認するように$makiを振り返って見たが、特に何も言うことなく、そのまま自分の家の前まで辿り着くと、",
                "鍵を開けて中へと入った"),
            "内装は小奇麗、物が少ないが、散らかっている",
            sakai.talk("散らかっているけど気にしないでくれ"),
            maki.do("$makiの顔を見ながら唇が読めるようにゆっくりとそう伝えた彼はリビングの奥の部屋に一人で入って行ってしまった",
                "$makiが住んでいるボロアパートの部屋の五倍は広いリビングに、ソファとテーブル、大きな液晶テレビにレコードのジャケットが並ぶ真っ白な棚が備え付けられていたが、",
                "何より目を引いたのは中央で存在感を放っている白いグランドピアノだ",
                "駅の広場に置かれているものによく似ているように思ったが、鍵盤の前に立ってみると一回り大きい、と感じた",
                "その足元に書き散らかした譜面が何枚も落ちている",
                "どれも大きくバツの字が書かれていた"),
            maki.do("$Sはその一枚を広い、譜面台にセットする",
                "革張りの椅子の座り心地は駅ピアノのパイプ椅子とは全然違い、落ち着かない",
                "それでも鍵盤に指を乗せるとその違和感はすぐに消え、譜面のドレミを指で叩いてみた"),
            "説明よりも描写で知らせる",
            sakai.talk("譜面が読めるのか？"),
            maki.do("部屋から出てきたストライプのシャツ姿の男が自分に向かって何か言っているのが分かり、怒られたのかと思って「ごめんなさい」と反射的に口にした"),
            sakai.talk("別にピアノは弾いてくれていい",
                "それより、譜面、読める？　譜面"),
            maki.do("彼が$makiに分かるようにゆっくり発音すると「一応」と小声で答える"),
            sakai.talk("あとでいくらでも弾かせてあげるから、先にシャワーを浴びておいで"),
            maki.talk("あの、それって"),
            maki.think("真っ先に脳裏をよぎったのは学校でも噂になっているパパ活のことだ",
                "そんなつもりで付いてきた訳じゃなかったけれど可能性を微塵も考えなかったのは$makiの落ち度かも知れない",
                "どうしよう", "座ったまま固まってしまった$makiに、けれど男は首を横に振った"),
            sakai.talk("変なことは考えなくていい", "君、よく駅のピアノを弾いている子だろう？",
                "それより風邪を引くから早くシャワーを浴びてきなさい"),
            maki.do("良い人かどうかの判断は後回しにして、$Sは彼からバスタオルを借り、浴室に向かった"),
            w.br(),
            sakai.talk("何がいいか分からないから適当に出前取ったけど"),
            maki.do("テーブルの上には唐揚げやフライドポテト、チャーハンに餃子、何かのスープ、",
                "大量のシーザーサラダとオレンジジュースの大きなペットボトルが二本、置かれている",
                "これから何かのパーティでも開くのかと勘違いしそうだ"),
            maki.talk("まるで小学生でも招いたみたい"),
            maki.do("$sakaiと名乗った男のシャツは大きくてぶかぶかだったけれど新品を開けてくれたようで、",
                "袖の先がぱりっと尖っていた",
                "ジャージのズボンは紐で無理矢理に絞ってずり落ちないようにしたけれど、",
                "コンビニで買ったらしい下着の感触の所為か、何だかむず痒い"),
            sakai.talk("どうしてあんなところで濡れてたかとか、いつも学校の時間にサボってピアノを弾いている理由とか聞くつもりはない",
                "それよりもずっと君に聞きたいことがあってね"),
            maki.talk("なに？"),
            maki.do("小皿に取り分けたチャーハンを口に入れ、$Sはじっと$sakaiの口元を見つめる"),
            sakai.talk("でもその前に、もう一つ聞きたいことが増えた", "君、耳はどれくらい悪いんだい？", "全く聞こえないってことはないよね"),
            maki.talk("うん", "ほんのちょっとだけ", "でもほとんど聞こえないから口を見て読み取るの"),
            sakai.talk("やっぱりそうか",
                "だから余計に気になるんだ",
                "君はどうしていつもあんなに楽しそうにピアノを弾けるんだい？"),
            maki.do("何を問われたのか、その文言こそ理解できたが、質問の意味が$Sにはさっぱり分からなくて小首を傾げたまま彼を見返した"),
            sakai.talk("そうだな", "聞こえないのにピアノを弾くのは楽しいのかい？", "メロディもハーモニーも君には届かないだろう？"),
            maki.talk("聞こえなくても見えるよ"),
            maki.do("そう口にしてしまってから「またやってしまった」と後悔した",
                    "そんなのある訳ない、頭がおかしい、そう言って同級生からからかわれてきたからだ"),
            sakai.talk("そうだね", "確かに聞こえなくても音は見える", "そっか", "君の言う通りだ"),
            maki.do("$sakaiは一人で何度も頷くと、",
                    "右側の補聴器を調整しながら目に涙を浮かべて微笑した"),
            maki.explain("この日から$makiの新しいピアノは$sakaiの家の白いグランドピアノになった",
                    "彼はわざわざ合鍵をくれ「いつでも好きな時に来て弾いていいよ」と言ってくれた",
                    "どんな考えがあるのかとか、特別な理由があるのかといった詮索はせず、$makiは自分の好きなピアノが弾き放題という幸せを受け入れた"),
            outline="$makiを拾った男の家にはピアノがあった。元作曲家だという")

def alms_giving(w: World):
    maki, sakai = w.get('maki'), w.get('sakai')
    return w.scene("男の施し",
            sakai.talk("そんなに気に入ったならいつでも遊びにくればいい"),
            maki.talk("ほんとに？", "ピアノ弾いても怒らない？"),
            sakai.talk("ここはその為の部屋だからね"),
            sakai.do("合鍵を$makiに渡した"),
            "合鍵の形を詳細描写",
            outline="ピアノを失った$makiに男はいつでも遊びにきてピアノを弾けばいいと言ってくれた")

def lostman(w: World):
    maki, sakai = w.get('maki'), w.get('sakai')
    return w.scene("失った男",
            maki.be("家に遊びにきている$S"),
            sakai.come("出前を持ってやってくる"),
            "$makiにとってのご馳走が、ピザやハンバーガーなんかだと分からせる。あとコーラとかのジャンクフード系",
            sakai.talk("ピザなんて久しぶりに食べるよ"),
            maki.do("$sakaiが話すのも気にせず、ピアノを触っている$S"),
            sakai.talk("飲み物はオレンジジュースでいいんだっけ？"),
            "$sakaiがアルコールを飲まないことに$makiは嬉しくなること",
            maki.do("$sakaiがコップに注いだのを見て適当に頷く"),
            maki.do("ピアノを弾くのを中断して、テーブルにやってくる$S"),
            sakai.do("$makiが難聴気味なのをいいことに、ピザを食べる彼女に向けて独り言を話し始める$S"),
            sakai.talk("$meの母親はフルート奏者でね、いつも世界の色々な街に行っては音楽と会話していた",
                "だから$meにとって音というのは空気みたいなものだったんだ",
                "気がついたら作曲をするようになっていたよ"),
            sakai.talk("大学で専門的な勉強もしたけれど、そこには$meと同じように音のことを考えている人間はいなかった",
                "どちらかといえば仕事として、あるいは技術としての音、あるいは音楽というものを考え、実践している人ばかりで、",
                "結局友達は音楽だけだったよ"),
            sakai.talk("それがある日突然、失われた",
                "突発性難聴という言葉は聞いたことがあったが、それがまさか自分に降り掛かってくるなんて思ってもなかったよ"),
            sakai.talk("結局戻ったのは僅かな聴力で、作曲することもできず、音は$meの世界から遠ざかってしまった"),
            sakai.talk("駅前にピアノを寄付したのは$meなんだ",
                "そのピアノを楽しそうに弾く君を見て、一度話してみたいと思っていた"),
            sakai.talk("いつかまた$meが曲を書けたら、その曲を君に弾いてもらいたい"),
            maki.talk("いいよ"),
            maki.do("$Sは笑顔で承諾し、ピザを口に入れた"),
            outline="$sakaiは大切なものを失ったと、説明した")

def falldown(w: World):
    maki, sakai = w.get('maki'), w.get('sakai')
    return w.scene("倒れる男",
            w.symbol("　　　　◆"),
            maki.come("一月もすると$Sは学校帰りにそのまま$sakaiのマンションに遊びに来て、疲れ果てるまでピアノを弾くという生活を送るようになっていた"),
            maki.do("雲が一日空を覆い、じめっとした空気がそこかしこにまとわりついているような季節だ",
                "合鍵を差し込みながらついでにシャワーも浴びさせてもらおうかしらなんて考えながら、勝手知ったるでドアを開けて中に入る"),
            maki.do("いつもならスリッパに履き替えたところで応対に出てくることが多いのに、この日は不思議なほど部屋の空気が静まり返っていた"),
            maki.talk("$sakaiさん？"),
            maki.do("補聴器をつけているから$Sの小さな声でも聞こえるけれど、反応は何もないままだ",
                "リビングのテーブルの上にはほとんど中身の残っていないコーラのペットボトルが一本だけ置かれ、",
                "その脇に譜面を書いた紙が整えて置かれていた"),
            maki.do("ずっと書けないと言っていた新曲が、遂に完成したのだろうか"),
            maki.talk("$sakaiさん、いない？"),
            maki.do("寝室のドアだった",
                "少しだけ開いている"),
            maki.do("喉を嫌な唾が流れ落ちたのが分かった"),
            maki.do("それでも声を掛けながらそのドアを開け、$Sは部屋に入る",
                "そこには倒れたまま動かなくなっている$sakaiがいた",
                "シャツを脱ごうとしたのか右側だけ袖が抜けている"),
            maki.do("どうすればいいか分からなくなり思わずしゃがんで耳を塞いでしまったが、",
                "ベッドの上に転がっているスマートフォンを目にして、思い切って手に取った"),
            maki.talk("あの、助けて下さい！"),
            maki.do("慌てて$Sが電話をした先は警察だった"),
            outline="ある日、$sakaiの部屋に入ると、彼が倒れていた")
